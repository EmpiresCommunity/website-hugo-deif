---
title: Ежемесячный отчёт о разработке Empires UE4  - Апрель 2021
author: RoyAwesome
date: "2021-05-02"
tags: [ "UE4" ]
post_type: UE4
---


---

## Обновление Проекта
###### RoyAwesome

Привет всем.  Много времени прошло с прошлого отчёта.  Виноват. У меня было несколько месяцев между проектом и работой, а также нехилая сезонная депрессия, так что Empires отошёл на второй план. Прогресс не останавливался, мы просто не писали отчёты.  Вполне ожидаемо, учитывая нашу волонтёрскую природу, и сейчас моя главная задача - не допустить торможения развития проекта, если я или другие люди не смогут более этим заниматься.

Как я и говорил, работа не прекращалась.  В последние несколько месяцев наша команда многое успела сделать, и мы невероятно рады показать вам, что у нас есть.

Даём вам краткий обзор проекта в его нынешнем виде, на текущем этапе осталось всего 5 пользовательских историй программирования, и над всеми мы поработали. Для тех, кто не знает, что такое история пользователя, это запись задачи, которая описывает то, что вы испытаете в игре в качестве пользователя. Например, история пользователя звучит так: “Как игрок, я могу целиться прицелом своего пистолета”. Эта история дает нам представление о функции, которую мы создаем, и из которой можем создавать задачи, чтобы её воплотить. 

Вот остальные истории пользователей для этого этапа на данный момент:



*   Как игрок, Я могу взаимодействовать с ящиком патронов чтобы пополнить боезапас
*   Как игрок, Когда моя команда достигнет 0 тикетов, она проиграет
*   Как игрок, Я могу целиться оружием
*   Как разработчик, Анимации гранат достаточно для реализации мин и других метательных
*   Как разработчик, Пули должны быть внесены в ECS 

Мы планируем завершить эти истории к концу следующего месяца и покончить со вторым этапом!

Мы начинаем планировать этап 3, и я надеюсь, что мы устроим игровой тест где-то в течение цикла разработки этого этапа. Вероятно, это будут своего рода тестовые выходные, где мы протестируем технические элементы и посмотрим на геймплей в целом на версии UE4. Скорее всего, машинок или командирского режима не будет, но мы всё равно попробуем!

Я начинаю искать больше разработчиков для помощи в проекте. Недавно мы пригласили Dementei - профессионала, что занимается дизайном уровней и материалами, и я очень рад работать с ним. Мы также привлекли Oktay и Pred007 для работы над игровым дизайном, таким как ощущение оружия и баланс. В ближайшие месяцы мы будем искать больше людей с целью ускорения проекта и обеспечения того, чтобы все продолжалось.

---

## Компиляция Проекта
###### RoyAwesome

Одна из проблем, с которой мы постоянно сталкивались, заключалась в том, что разработчики, не являющиеся программистами, с трудом запускали редактор в первый раз. Всё потому, что мы используем версию исходного кода движка Unreal, для запуска которого требуется Visual Studio и множество других инструментов.  

Для решения этой проблемы, я сначала решил создать заранее скомпилированный редактор Unreal, называемый сборкой установленного движка. Именно так Epic распространяет Unreal Engine на своем лаунчере. Получение установленной сборки движка для компиляции было первоначальной проблемой, так как мне пришлось внести некоторые изменения в реализацию Steam движка для нашего проекта, и они не компилировались в этом режиме. Исправив это, я перешёл к задаче взять уже заранее скомпилированную сборку и разместить ее где-нибудь. Большая проблема: весит оно 30 гигабайт, а бесплатные хостинги столько не вмещают.

Так что я подумал что проще будет написать скрипт, что будет автоматически компилировать редактор, чтобы не программисты могли спокойно работать, не морочась с запуском.  Я понял, как использовать Unreal Build Tool для компиляции различных программ, и теперь у нас есть однокнопочный механизм для установки проекта на версию исходного кода, просто редактор.

Мы уже использовали этот способ для адаптации Oktay и Dementei, ранее это было серьезным препятствием для привлечения новых людей в проект, но это более не проблема.  

---

## Отдача Оружия
###### RoyAwesome

Главная задача проекта - создание современного Empires на современном движке.  Большая часть этого заключается в том, чтобы модернизировать стрельбу в Empires, и это включает в себя создание оружия, из которого интересно стрелять.

Сейчас у множества современных шутеров есть целые команды геймдизайнеров, аниматоров, программистов и целая армия QA, чтобы создавать удивительно чувствительные пушки с контролируемой отдачей и умным конусом огня. У нас этого нет. Поэтому вместо этого мы просто взяли дизайн из Battlefield 3, 4 и Planetside 2, поскольку все они имеют почти идентичные системы проектирования оружия.  Я смог воссоздать систему стрельбы на основе этих игр за пару дней, поскольку они очень хорошо документированы.  

Ещё я реализовал все атрибуты значений отдачи, поэтому мы можем не только легко изменять значения отдачи и конуса огня для каждого оружия, но и изменять их с помощью навыков и эффектов геймплея. Эта модифицируемость станет основой системы положения, поэтому мы можем легко повысить точность приседания или лежа.

После создания системы, я дал свободу нашим дизайнерам для их удобства, и они хорошо справляются, рассматривая все оружия и делая их фановыми для стрельбы. 

 <video controls>
  <source src="https://cdn.discordapp.com/attachments/698655659193008208/799509364346978344/2021-01-14_21-23-28.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video> 

---

## Чистка и Полировка
###### RoyAwesome

Возвращаясь в Декабрь, я показал Empires паре людей за пределами комьюнити.  Я хотел получить фидбек от людей, которые почти не знают, что Empires на ранней стадии, для того чтобы я мог быть уверен в системах таких, как Спавн, Выбор классов и предметов, а также общие системы геймплея, что имеют смысл и легко выражаются новым игрокам. Конечно, демонстрируя это, я обнаружил около 30 ошибок с текущим проектом. Я исправил их все, сделав игру более играбельной и функциональной.

А ещё я добавил проверку Спавна, которая покажет вам, чего вам не хватает для спавна.  


{{< image-proc spawnchecklist.png Resize "1100x" >}}

---

## СФ инженер & Модель гренадёра
###### Mayama

Я наконец завершил оставшиеся две высокополигональные модели солдат серверных фракций. Инженера и Гренадёра. На самом деле я хотел сделать низкополигональные и продолжить текстурировать их дальше, но сейчас мы обсуждаем, хотим ли мы использовать Metahuman UE4 для создания реалистичных лиц. Это займет немного больше времени, но сэкономит много времени в долгосрочной перспективе (и мне не нужно моделировать лица, что является плюсом для нас с вами, поверьте мне). Пока это не выяснится, я сосредоточусь на других вещах. Недостатком является то, что нет особого смысла делать что-либо низкополигональное еще и вводить это в игру до того, как модели пехоты будут в движке. Они нужны, чтобы убедиться, что пушки не проходят сквозь модель, а ещё нужны модели пехоты нужны для сравнения: насколько высоки стены, здания и т.д. Возможно.

Обе модели достаточно ясно, у инженера есть несколько стимпанковских (или дизельпанковских?) гаджетов и аккумулятор на спине. У гренадера есть противосколочный бронежилет, а эти 3 металлические полосы - дань уважения модели из Source версии. Берет на голове инженера не на 100% похож на него, но я думаю, что это к лучшему, потому что униформа уже похожа на реальную из жизни.

{{< triple-image-thumbnail "NF_engi_big.png" "NF_engi_small_1.png" "NF_engi_small_2.png" >}}

{{< triple-image-thumbnail "NF_gren_big.png" "NF_gren_small_1.png" "NF_gren_small_2.png" >}}

---

## Оружие Бреноди
###### Mayama

Я начал продумывать концепции оружия Бреноди, нам нужно разобраться с некоторыми вещами до того, как я смогу делать низкополигональные модель пехоты СФ. Это первая концепция, и ею я доволен. Это простая модель ПП. Дизайн находится где-то между высокими технологиями 80-х и дешевой пластиковой электроникой 90-х. Я хотел сделать модели, которые художественно ближе к “угловатому виду истребителя-невидимки”, что есть у танков Бреноди, нежели были у нас в Source Empires. Модель нуждается в некоторых мелких деталях, особенно в прицеле, и я не совсем доволен деталями на амортизирующем прикладе.

{{< image-proc BE_SMG_concept.png Resize "1100x" >}}

---

## Переделка гранат в метательное
###### RoyAwesome

В конце прошлого года Megafunk создавал прототип гранат, это была отличная первоначальная реализация. Однако в Этапе 3 одна из наших целей состоит в том, чтобы реализовать каждый отдельный элемент пехоты, и хотя этот первоначальный прототип охватывал простые гранаты, мне нужно было, чтобы он работал со всем, что можно бросить.

Поэтому я переделал его в “Универсальную бросаемую” систему. Теперь он поддерживает гранаты и мины, а также C4, что я хочу создать и найти этому применение в игре.

Позже я добавил настраиваемые атрибуты и подключил анимацию, а также дополнительные механики, такие как задержка перед броском гранаты и липучесть. Мины появятся на следующем этапе, но их должно быть легко реализовать.

 <video controls>
  <source src="https://cdn.discordapp.com/attachments/698655659193008208/836845413532434462/2021-04-27_23-04-24.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video> 


 <video controls>
  <source src="https://cdn.discordapp.com/attachments/698655659193008208/837949328441868288/2021-05-01_00-11-03.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video> 


 <video controls>
  <source src="https://cdn.discordapp.com/attachments/698655659193008208/837859254995779594/2021-04-30_18-12-55.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video> 

---

## боеприпасы и их пополнение
###### RoyAwesome

Ящики боеприпасов и здоровья являются важной частью Empires, и пополнение запасов было важной частью второго этапа. Поскольку мы используем систему игровых способностей Unreal Engine, а боеприпасы являются атрибутом, пополнение запасов боеприпасов относительно тривиально. Итак, я взял импортированную сетку коробки с боеприпасами и применил к ней игровой эффект для пополнения боеприпасов. 

Как только базовая механика пополнения боеприпасов будет готова, пополнение запасов здоровья также будет довольно простым.

Все, что осталось сейчас, - это пополнение неактивного оружия, и надо убедиться, что коробка пополняет запасы только людей из той же команды.
